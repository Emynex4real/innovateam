(self.webpackChunkinnovateam=self.webpackChunkinnovateam||[]).push([[451],{526:(e,a,s)=>{"use strict";s.d(a,{A:()=>m});var r=s(2555),t=s(3986),n=s(2483),o=s(4541),d=s(4956),i=s(6723);const l=["className","variant","size","asChild"],c=n.forwardRef(((e,a)=>{let{className:s,variant:n="default",size:c="default",asChild:m=!1}=e,u=(0,t.A)(e,l);const f=m?o.DX:"button";return(0,i.jsx)(f,(0,r.A)({className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===n,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===n,"border border-input bg-background hover:bg-accent hover:text-accent-foreground":"outline"===n,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===n,"hover:bg-accent hover:text-accent-foreground":"ghost"===n,"bg-green-500 text-white hover:bg-green-600":"success"===n,"h-10 px-4 py-2":"default"===c,"h-9 rounded-md px-3":"sm"===c,"h-11 rounded-md px-8":"lg"===c},s),ref:a},u))}));c.displayName="Button";const m=c},2196:(e,a,s)=>{"use strict";s.d(a,{Ay:()=>b,BT:()=>x,Wu:()=>g,ZB:()=>w,aR:()=>p,wL:()=>v});var r=s(2555),t=s(3986),n=s(2483),o=s(4956),d=s(6723);const i=["className"],l=["className"],c=["className"],m=["className"],u=["className"],f=["className"],h=n.forwardRef(((e,a)=>{let{className:s}=e,n=(0,t.A)(e,i);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,o.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},n))}));h.displayName="Card";const p=n.forwardRef(((e,a)=>{let{className:s}=e,n=(0,t.A)(e,l);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,o.cn)("flex flex-col space-y-1.5 p-6",s)},n))}));p.displayName="CardHeader";const w=n.forwardRef(((e,a)=>{let{className:s}=e,n=(0,t.A)(e,c);return(0,d.jsx)("h3",(0,r.A)({ref:a,className:(0,o.cn)("text-2xl font-semibold leading-none tracking-tight",s)},n))}));w.displayName="CardTitle";const x=n.forwardRef(((e,a)=>{let{className:s}=e,n=(0,t.A)(e,m);return(0,d.jsx)("p",(0,r.A)({ref:a,className:(0,o.cn)("text-sm text-muted-foreground",s)},n))}));x.displayName="CardDescription";const g=n.forwardRef(((e,a)=>{let{className:s}=e,n=(0,t.A)(e,u);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,o.cn)("p-6 pt-0",s)},n))}));g.displayName="CardContent";const v=n.forwardRef(((e,a)=>{let{className:s}=e,n=(0,t.A)(e,f);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,o.cn)("flex items-center p-6 pt-0",s)},n))}));v.displayName="CardFooter";const b=h},7848:(e,a,s)=>{"use strict";s.d(a,{p:()=>l});var r=s(2555),t=s(3986),n=s(2483),o=s(4956),d=s(6723);const i=["className","type"],l=n.forwardRef(((e,a)=>{let{className:s,type:n}=e,l=(0,t.A)(e,i);return(0,d.jsx)("input",(0,r.A)({type:n,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:a},l))}));l.displayName="Input"},9154:(e,a,s)=>{"use strict";s.d(a,{A:()=>m});var r=s(2555),t=s(3986),n=s(2483),o=s(6961),d=s(4956),i=s(6723);const l=["className"],c=n.forwardRef(((e,a)=>{let{className:s}=e,n=(0,t.A)(e,l);return(0,i.jsx)(o.b,(0,r.A)({ref:a,className:(0,d.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s)},n))}));c.displayName=o.b.displayName;const m=c},1649:(e,a,s)=>{"use strict";s.d(a,{A:()=>m});var r=s(2555),t=s(3986),n=s(2483),o=s(5272),d=s(4956),i=s(6723);const l=["className","orientation","decorative"],c=n.forwardRef(((e,a)=>{let{className:s,orientation:n="horizontal",decorative:c=!0}=e,m=(0,t.A)(e,l);return(0,i.jsx)(o.b,(0,r.A)({ref:a,decorative:c,orientation:n,className:(0,d.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",s)},m))}));c.displayName=o.b.displayName;const m=c},8184:()=>{},5451:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var r=s(2555),t=s(2483),n=s(9094),o=s(5745),d=s(3233),i=s(3869),l=s(4304),c=s(9777),m=s(2196),u=s(526),f=s(7848),h=s(9154),p=s(8184),w=s.n(p),x=s(1649),g=s(6723);const v=(0,t.memo)((()=>{const{user:e,updateProfile:a,logout:s}=(0,n.As)(),{isDarkMode:p}=(0,c.D)(),[v,b]=((0,t.useRef)(null),(0,t.useState)({name:"",email:"",phone:"",address:"",birthdate:"",currentPassword:"",newPassword:"",confirmPassword:"",avatar:""})),[y,N]=(0,t.useState)({}),[j,P]=(0,t.useState)(0),[A,C]=(0,t.useState)(!1),[k,R]=(0,t.useState)(!1),[S,F]=(0,t.useState)(!1),[D,E]=(0,t.useState)(0),[I,z]=(0,t.useState)(!1),[B,O]=(0,t.useState)(!1),L=()=>{const e={};return v.name.trim()||(e.name="Name is required"),v.email||(e.email="Please enter an email"),v.email&&!/\S+@\S+\.\S+/.test(v.email)&&(e.email="Invalid email"),v.phone&&!/^[\d\s-+()]+$/.test(v.phone)&&(e.phone="Invalid phone"),k&&(v.currentPassword||(e.currentPassword="Current password is required"),v.newPassword?v.newPassword.length<8&&(e.newPassword="Password must be at least 8 characters"):e.newPassword="New password is required",v.newPassword!==v.confirmPassword&&(e.confirmPassword="Passwords do not match")),e};(0,t.useEffect)((()=>{(()=>{let e=0;v.name.trim()&&e++,v.email&&e++,v.phone&&e++,v.address&&e++,v.birthdate&&e++,E(Math.round(e/5*100))})()}),[v]),(0,t.useEffect)((()=>{e&&b((a=>(0,r.A)((0,r.A)({},a),{},{name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",birthdate:e.birthdate||"",avatar:e.avatar||""})))}),[e]),(0,t.useEffect)((()=>{v.newPassword?P((e=>{let a=0;return e.length>=8&&a++,/[A-Z]/.test(e)&&a++,/[0-9]/.test(e)&&a++,/[^A-Za-z0-9]/.test(e)&&a++,a})(v.newPassword)):P(0)}),[v.newPassword]),(0,t.useEffect)((()=>{const e=(0,l.debounce)((()=>{localStorage.setItem("profileFormData",JSON.stringify({name:v.name,email:v.email,phone:v.phone,address:v.address,birthdate:v.birthdate}))}),500);return e(),()=>e.cancel()}),[v.name,v.email,v.phone,v.address,v.birthdate]),(0,t.useEffect)((()=>{const e=localStorage.getItem("profileFormData");e&&b((a=>(0,r.A)((0,r.A)({},a),JSON.parse(e))))}),[]);const Z=(0,t.useCallback)((e=>{const{name:a,value:s}=e.target;b((e=>(0,r.A)((0,r.A)({},e),{},{[a]:s}))),N((e=>(0,r.A)((0,r.A)({},e),{},{[a]:""})))}),[]);return e?(0,g.jsxs)("div",{className:"min-h-screen p-6 transition-colors duration-200 ".concat(p?"bg-dark-surface text-dark-text-primary":"bg-gray-50 text-gray-800"),children:[(0,g.jsx)(i.l$,{position:"top-right"}),(0,g.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:[(0,g.jsxs)(m.Ay,{className:p?"bg-dark-surface-secondary border-dark-border":"",children:[(0,g.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,g.jsx)(m.ZB,{className:"text-2xl font-bold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Profile Settings"}),(0,g.jsx)(u.A,{onClick:()=>O(!B),variant:p?"secondary":"outline",className:"flex items-center gap-2",children:B?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.Bc_,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Save"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(o.WXf,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Edit"})]})})]}),(0,g.jsx)(x.A,{className:p?"bg-dark-border":""}),(0,g.jsx)(m.Wu,{className:"p-6",children:(0,g.jsx)("form",{onSubmit:async e=>{e.preventDefault();const s=L();if(Object.keys(s).length>0)return N(s),void Object.values(s).forEach((e=>i.oR.error(e)));F(!0);try{if("function"!==typeof a)return console.warn("updateProfile is not a function. Check AuthContext implementation."),void i.oR.error("Profile update is not available. Please try again later.");await a({name:v.name,email:v.email,phone:v.phone,address:v.address,birthdate:v.birthdate,avatar:v.avatar}),i.oR.success("Profile updated successfully!"),localStorage.removeItem("profileFormData"),O(!1)}catch(r){const e=r.message||"Failed to update profile. Please try again.";i.oR.error(e),console.error("Profile update error:",r)}finally{F(!1)}},className:"space-y-6",children:(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"name",children:"Full Name"}),(0,g.jsx)(f.p,{type:"text",id:"name",name:"name",value:v.name,onChange:Z,disabled:!B,className:B?"":"cursor-not-allowed opacity-75"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"email",children:"Email Address"}),(0,g.jsx)(f.p,{type:"email",id:"email",name:"email",value:v.email,onChange:Z,disabled:!B,className:B?"":"cursor-not-allowed opacity-75"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"phone",children:"Phone Number"}),(0,g.jsx)(f.p,{type:"tel",id:"phone",name:"phone",value:v.phone,onChange:Z,disabled:!B,className:B?"":"cursor-not-allowed opacity-75"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"address",children:"Address"}),(0,g.jsx)(w(),{id:"address",name:"address",value:v.address,onChange:Z,disabled:!B,rows:3,className:B?"":"cursor-not-allowed opacity-75"})]}),B&&(0,g.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,g.jsx)(u.A,{type:"button",variant:"outline",onClick:()=>{window.confirm("Are you sure you want to reset all changes?")&&(b({name:(null===e||void 0===e?void 0:e.name)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",address:(null===e||void 0===e?void 0:e.address)||"",birthdate:(null===e||void 0===e?void 0:e.birthdate)||"",avatar:(null===e||void 0===e?void 0:e.avatar)||"",currentPassword:"",newPassword:"",confirmPassword:""}),N({}),localStorage.removeItem("profileFormData"),i.oR.success("Form reset successfully."))},children:"Reset"}),(0,g.jsx)(u.A,{type:"submit",variant:"default",className:"bg-green-500 hover:bg-green-600",children:"Save Changes"})]})]})})}),(0,g.jsxs)(m.wL,{className:"flex justify-between",children:[(0,g.jsx)(u.A,{variant:"destructive",onClick:()=>{window.confirm("Are you sure you want to log out?")&&(s(),i.oR.success("Logged out successfully."))},children:"Logout"}),k?(0,g.jsx)(u.A,{variant:"outline",onClick:()=>R(!1),children:"Cancel Password Change"}):(0,g.jsx)(u.A,{variant:"outline",onClick:()=>R(!0),children:"Change Password"})]})]}),k&&(0,g.jsxs)(m.Ay,{className:"mt-6 ".concat(p?"bg-dark-surface-secondary border-dark-border":""),children:[(0,g.jsx)(m.aR,{children:(0,g.jsx)(m.ZB,{className:p?"text-dark-text-primary":"",children:"Change Password"})}),(0,g.jsxs)(m.Wu,{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"currentPassword",children:"Current Password"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)(f.p,{type:A?"text":"password",id:"currentPassword",name:"currentPassword",value:v.currentPassword,onChange:Z}),(0,g.jsx)(u.A,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>C(!A),children:A?(0,g.jsx)(o._NO,{}):(0,g.jsx)(o.Vap,{})})]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"newPassword",children:"New Password"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)(f.p,{type:A?"text":"password",id:"newPassword",name:"newPassword",value:v.newPassword,onChange:Z}),(0,g.jsx)("div",{className:"mt-2 flex gap-1",children:[...Array(4)].map(((e,a)=>(0,g.jsx)("div",{className:"h-1 flex-1 rounded-full ".concat(a<j?"bg-green-500":p?"bg-dark-border":"bg-gray-200")},a)))})]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,g.jsx)(f.p,{type:A?"text":"password",id:"confirmPassword",name:"confirmPassword",value:v.confirmPassword,onChange:Z})]})]}),(0,g.jsxs)(m.wL,{className:"flex justify-end gap-4",children:[(0,g.jsx)(u.A,{type:"button",variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,g.jsx)(u.A,{type:"button",variant:"default",className:"bg-green-500 hover:bg-green-600",onClick:async e=>{e.preventDefault();const s=L();if(s.currentPassword||s.newPassword||s.confirmPassword)return N(s),void Object.values(s).forEach((e=>i.oR.error(e)));if(window.confirm("Are you sure you want to change your password?")){F(!0);try{if("function"!==typeof a)return console.warn("updateProfile is not a function. Check AuthContext implementation."),void i.oR.error("Password change is not available. Please try again later.");await a({currentPassword:v.currentPassword,newPassword:v.newPassword}),i.oR.success("Password changed successfully!"),b((e=>(0,r.A)((0,r.A)({},e),{},{currentPassword:"",newPassword:"",confirmPassword:""}))),R(!1)}catch(t){const e=t.message||"Failed to change password. Please try again.";i.oR.error(e),console.error("Password change error:",t)}finally{F(!1)}}},disabled:S,children:S?"Updating...":"Update Password"})]})]})]})]}):(0,g.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-dark-surface",children:(0,g.jsx)(d.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-t-green-500 border-gray-200 rounded-full"})})}))}}]);
//# sourceMappingURL=451.dd7232a9.chunk.js.map