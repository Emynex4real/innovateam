"use strict";(self.webpackChunkpersonal_project=self.webpackChunkpersonal_project||[]).push([[722],{2722:(e,r,a)=>{a.r(r),a.d(r,{default:()=>m});var t=a(2555),s=a(2483),o=a(3376),l=a(3233),n=a(3869),i=a(4686),c=a(9777),d=a(6723);const u=(e,r)=>{switch(r.type){case"UPDATE_FIELD":return(0,t.A)((0,t.A)({},e),{},{[r.field]:r.value});case"UPDATE_COURSE":const a=[...e.courses];return a[r.index]=(0,t.A)((0,t.A)({},a[r.index]),{},{[r.key]:r.value}),(0,t.A)((0,t.A)({},e),{},{courses:a});case"SET_FILE":return(0,t.A)((0,t.A)({},e),{},{[r.field]:r.file});case"RESET_FORM":return r.initialFormState;default:return e}},m=()=>{const{state:e}=(0,o.zy)(),{id:r,type:a,quantity:t,amount:m,fullname:g}=e||{},x=(0,o.Zp)(),{isDarkMode:p}=(0,c.D)(),b={fullname:g||"",profileCode:"",jambRegNo:"",courses:Array.from({length:9},(()=>({subject:"",grade:"",regNo:"",year:"",examType:""}))),oLevelFile:null,secondSittingFile:null,additionalInfo:""},[f,h]=(0,s.useReducer)(u,b),[y,v]=(0,s.useState)(!1),[j,k]=(0,s.useState)(0),N=["Agricultural Science","Animal Husbandry","Arabic","Auto Mechanics","Basic Electricity","Basic Electronics","Biology","Bookkeeping","Building Construction","Chemistry","Christian Religious Studies","Civic Education","Clothing and Textiles","Commerce","Computer Studies","Data Processing","Economics","English Language","Financial Accounting","Fisheries","Food and Nutrition","French","Further Mathematics","Garment Making","General Mathematics","Geography","Government","Hausa","Health Education","History","Home Management","Igbo","Insurance","Islamic Religious Studies","Literature-in-English","Marketing","Metal Work","Music","Office Practice","Physical Education","Physics","Store Management","Technical Drawing","Visual Art","Woodwork","Yoruba"].sort();(0,s.useEffect)((()=>{(()=>{let e=0;const r=5*f.courses.length+2;f.fullname.trim()&&e++,f.oLevelFile&&e++,f.courses.forEach((r=>{r.subject&&e++,r.grade&&e++,r.regNo&&e++,r.year&&e++,r.examType&&e++})),k(Math.round(e/r*100))})()}),[f]);const E=e=>e>=1980&&e<=(new Date).getFullYear();(0,s.useEffect)((()=>{const e=setTimeout((()=>{localStorage.setItem("oLevelFormData",JSON.stringify(f))}),1e3);return()=>clearTimeout(e)}),[f]),(0,s.useEffect)((()=>{const r=localStorage.getItem("oLevelFormData");if(r){const e=JSON.parse(r);Object.entries(e).forEach((e=>{let[r,a]=e;"courses"!==r?h({type:"UPDATE_FIELD",field:r,value:a}):a.forEach(((e,r)=>{r<f.courses.length&&Object.entries(e).forEach((e=>{let[a,t]=e;h({type:"UPDATE_COURSE",index:r,key:a,value:t})}))}))}))}e||(n.oR.error("Invalid navigation. Redirecting..."),setTimeout((()=>x("/forms")),1500))}),[e,x,f.courses.length]);const F=(0,s.useCallback)(((e,r)=>{h({type:"UPDATE_FIELD",field:e,value:r})}),[]),S=(0,s.useCallback)(((e,r,a)=>{h({type:"UPDATE_COURSE",index:e,key:r,value:a})}),[]);return(0,d.jsxs)("div",{className:"min-h-screen py-12 font-sans transition-colors duration-200 ".concat(p?"bg-dark-surface text-dark-text-primary":"bg-gradient-to-b from-gray-100 to-green-50"),children:[(0,d.jsx)(n.l$,{position:"top-right"}),(0,d.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:max-w-6xl",children:[(0,d.jsxs)("div",{className:"mb-8",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,d.jsx)("h2",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Form Progress"}),(0,d.jsxs)("span",{className:"text-sm font-medium ".concat(p?"text-dark-text-secondary":"text-gray-600"),children:[j,"% Complete"]})]}),(0,d.jsx)("div",{className:"h-2 rounded-full ".concat(p?"bg-dark-border":"bg-gray-200"),children:(0,d.jsx)(l.P.div,{initial:{width:0},animate:{width:"".concat(j,"%")},className:"h-full rounded-full ".concat(p?"bg-green-600":"bg-green-500")})})]}),(0,d.jsxs)("div",{className:"".concat(p?"bg-dark-surface-secondary border-dark-border":"bg-white border-gray-100"," rounded-2xl shadow-xl p-6 md:p-8 border"),children:[(0,d.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,d.jsx)("h1",{className:"text-2xl md:text-3xl font-bold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"O-Level Entry Form"}),(0,d.jsxs)("div",{className:"flex gap-4",children:[(0,d.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to clear the form?")&&(h({type:"RESET_FORM",initialFormState:b}),localStorage.removeItem("oLevelFormData"),n.oR.success("Form cleared successfully."))},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ".concat(p?"bg-dark-surface hover:bg-dark-border text-dark-text-primary":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"Clear Form"}),(0,d.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to cancel? Unsaved changes will be lost.")&&(localStorage.removeItem("oLevelFormData"),x("/forms"))},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ".concat(p?"bg-red-900/30 text-red-400 hover:bg-red-900/40":"bg-red-50 text-red-600 hover:bg-red-100"),children:"Cancel"})]})]}),(0,d.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),v(!0);const{isValid:t,errors:s}=(e=>{const r=e.filter((e=>e.subject&&e.grade&&e.regNo&&e.year&&e.examType)),a=new Set(r.map((e=>e.subject)));return{isValid:9===r.length&&a.size===r.length&&r.every((e=>E(e.year))),errors:[9!==r.length?"All 9 subjects must be fully completed.":"",a.size!==r.length?"Duplicate subjects detected.":"",r.some((e=>!E(e.year)))?"Invalid year in subjects.":""].filter(Boolean)}})(f.courses);if(!f.fullname.trim())return n.oR.error("Please enter a full name."),void v(!1);if(!f.oLevelFile)return n.oR.error("Please upload an O-Level result file."),void v(!1);if(!t)return s.forEach((e=>n.oR.error(e))),void v(!1);if(f.jambRegNo&&(o=f.jambRegNo,!/^[0-9]{12}[A-Z]{2}$/.test(o)))return n.oR.error("Invalid JAMB registration number format."),void v(!1);var o;try{const e=new FormData;Object.entries(f).forEach((r=>{let[a,t]=r;"courses"===a?e.append(a,JSON.stringify(t)):"oLevelFile"===a||"secondSittingFile"===a?t&&e.append(a,t):e.append(a,t)})),await i.A.post("https://api.example.com/jamb",e,{headers:{"Content-Type":"multipart/form-data"}}),n.oR.success("O-Level entry submitted successfully!"),localStorage.removeItem("oLevelFormData"),setTimeout((()=>{x("/completed",{state:{updatedEntry:{id:r,type:a,fullname:f.fullname,profileCode:f.profileCode||"PROFESS-".concat(Math.floor(9e4*Math.random())),status:"Pending"}}})}),2e3)}catch(l){n.oR.error("Submission failed. Please try again."),console.error("Submission error:",l)}finally{v(!1)}},className:"space-y-8",children:[(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Personal Information"}),(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Full Name"}),(0,d.jsx)("input",{type:"text",value:f.fullname,onChange:e=>F("fullname",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary placeholder-dark-text-secondary":"border-gray-200 placeholder-gray-400"),placeholder:"Enter your full name"})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"JAMB Registration Number (Optional)"}),(0,d.jsx)("input",{type:"text",value:f.jambRegNo,onChange:e=>F("jambRegNo",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary placeholder-dark-text-secondary":"border-gray-200 placeholder-gray-400"),placeholder:"Enter JAMB registration number"})]})]})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"O-Level Results"}),(0,d.jsx)("div",{className:"grid grid-cols-1 gap-6",children:f.courses.map(((e,r)=>(0,d.jsx)("div",{className:"p-4 rounded-xl border ".concat(p?"border-dark-border bg-dark-surface":"border-gray-200 bg-gray-50"),children:(0,d.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[(0,d.jsxs)("div",{className:"md:col-span-2",children:[(0,d.jsxs)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:["Subject ",r+1]}),(0,d.jsxs)("select",{value:e.subject,onChange:e=>S(r,"subject",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),children:[(0,d.jsx)("option",{value:"",children:"Select Subject"}),N.map((e=>(0,d.jsx)("option",{value:e,className:p?"bg-dark-surface text-dark-text-primary":"",children:e},e)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Grade"}),(0,d.jsxs)("select",{value:e.grade,onChange:e=>S(r,"grade",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),children:[(0,d.jsx)("option",{value:"",children:"Grade"}),["A1","B2","B3","C4","C5","C6","D7","E8","F9"].map((e=>(0,d.jsx)("option",{value:e,className:p?"bg-dark-surface text-dark-text-primary":"",children:e},e)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Exam Type"}),(0,d.jsxs)("select",{value:e.examType,onChange:e=>S(r,"examType",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),children:[(0,d.jsx)("option",{value:"",children:"Select"}),["WAEC","NECO","NABTEB"].map((e=>(0,d.jsx)("option",{value:e,className:p?"bg-dark-surface text-dark-text-primary":"",children:e},e)))]})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Year"}),(0,d.jsx)("input",{type:"number",value:e.year,onChange:e=>S(r,"year",e.target.value),min:"1980",max:(new Date).getFullYear(),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),placeholder:"YYYY"})]})]})},r)))})]}),(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsx)("h3",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Document Upload"}),(0,d.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,d.jsxs)("div",{children:[(0,d.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"O-Level Result (Required)"}),(0,d.jsxs)("div",{className:"p-4 border-2 border-dashed rounded-xl text-center ".concat(p?"border-dark-border hover:border-green-600":"border-gray-300 hover:border-green-500"),children:[(0,d.jsx)("input",{type:"file",onChange:e=>((e,r)=>{if(r){const a=5242880;if(!["application/pdf","image/jpeg","image/png"].includes(r.type))return void n.oR.error("Please upload a PDF, JPEG, or PNG file.");if(r.size>a)return void n.oR.error("File size must be less than 5MB.");h({type:"SET_FILE",field:e,file:r}),n.oR.success("".concat("oLevelFile"===e?"O-Level":"Second sitting"," file uploaded."))}})("oLevelFile",e.target.files[0]),accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"oLevelFile"}),(0,d.jsx)("label",{htmlFor:"oLevelFile",className:"cursor-pointer",children:(0,d.jsx)("div",{className:"text-sm ".concat(p?"text-dark-text-secondary":"text-gray-500"),children:f.oLevelFile?(0,d.jsx)("span",{className:"text-green-500",children:f.oLevelFile.name}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("span",{className:"font-medium ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Click to upload"})," or drag and drop"]})})})]})]})})]}),(0,d.jsx)("div",{className:"flex justify-end gap-4",children:(0,d.jsx)("button",{type:"submit",disabled:y,className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 ".concat(p?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white"," disabled:opacity-50 disabled:cursor-not-allowed"),children:y?(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Submitting..."]}):"Submit Entry"})})]})]})]})]})}}}]);
//# sourceMappingURL=722.4a48426f.chunk.js.map