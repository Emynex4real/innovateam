"use strict";(self.webpackChunkpersonal_project=self.webpackChunkpersonal_project||[]).push([[727],{526:(e,a,s)=>{s.d(a,{A:()=>m});var r=s(2555),t=s(3986),o=s(2483),n=s(4541),d=s(657),i=s(6723);const l=["className","variant","size","asChild"],c=o.forwardRef(((e,a)=>{let{className:s,variant:o="default",size:c="default",asChild:m=!1}=e,u=(0,t.A)(e,l);const f=m?n.DX:"button";return(0,i.jsx)(f,(0,r.A)({className:(0,d.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===o,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===o,"border border-input bg-background hover:bg-accent hover:text-accent-foreground":"outline"===o,"bg-secondary text-secondary-foreground hover:bg-secondary/80":"secondary"===o,"hover:bg-accent hover:text-accent-foreground":"ghost"===o,"bg-green-500 text-white hover:bg-green-600":"success"===o,"h-10 px-4 py-2":"default"===c,"h-9 rounded-md px-3":"sm"===c,"h-11 rounded-md px-8":"lg"===c},s),ref:a},u))}));c.displayName="Button";const m=c},2196:(e,a,s)=>{s.d(a,{Ay:()=>v,BT:()=>g,Wu:()=>w,ZB:()=>x,aR:()=>p,wL:()=>b});var r=s(2555),t=s(3986),o=s(2483),n=s(657),d=s(6723);const i=["className"],l=["className"],c=["className"],m=["className"],u=["className"],f=["className"],h=o.forwardRef(((e,a)=>{let{className:s}=e,o=(0,t.A)(e,i);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",s)},o))}));h.displayName="Card";const p=o.forwardRef(((e,a)=>{let{className:s}=e,o=(0,t.A)(e,l);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",s)},o))}));p.displayName="CardHeader";const x=o.forwardRef(((e,a)=>{let{className:s}=e,o=(0,t.A)(e,c);return(0,d.jsx)("h3",(0,r.A)({ref:a,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",s)},o))}));x.displayName="CardTitle";const g=o.forwardRef(((e,a)=>{let{className:s}=e,o=(0,t.A)(e,m);return(0,d.jsx)("p",(0,r.A)({ref:a,className:(0,n.cn)("text-sm text-muted-foreground",s)},o))}));g.displayName="CardDescription";const w=o.forwardRef(((e,a)=>{let{className:s}=e,o=(0,t.A)(e,u);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,n.cn)("p-6 pt-0",s)},o))}));w.displayName="CardContent";const b=o.forwardRef(((e,a)=>{let{className:s}=e,o=(0,t.A)(e,f);return(0,d.jsx)("div",(0,r.A)({ref:a,className:(0,n.cn)("flex items-center p-6 pt-0",s)},o))}));b.displayName="CardFooter";const v=h},7848:(e,a,s)=>{s.d(a,{A:()=>c});var r=s(2555),t=s(3986),o=s(2483),n=s(657),d=s(6723);const i=["className","type"],l=o.forwardRef(((e,a)=>{let{className:s,type:o}=e,l=(0,t.A)(e,i);return(0,d.jsx)("input",(0,r.A)({type:o,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:border-dark-border dark:bg-dark-surface dark:text-dark-text-primary dark:placeholder:text-dark-text-secondary dark:focus-visible:ring-primary-400",s),ref:a},l))}));l.displayName="Input";const c=l},9154:(e,a,s)=>{s.d(a,{A:()=>m});var r=s(2555),t=s(3986),o=s(2483),n=s(6961),d=s(657),i=s(6723);const l=["className"],c=o.forwardRef(((e,a)=>{let{className:s}=e,o=(0,t.A)(e,l);return(0,i.jsx)(n.b,(0,r.A)({ref:a,className:(0,d.cn)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s)},o))}));c.displayName=n.b.displayName;const m=c},1649:(e,a,s)=>{s.d(a,{A:()=>m});var r=s(2555),t=s(3986),o=s(2483),n=s(5272),d=s(657),i=s(6723);const l=["className","orientation","decorative"],c=o.forwardRef(((e,a)=>{let{className:s,orientation:o="horizontal",decorative:c=!0}=e,m=(0,t.A)(e,l);return(0,i.jsx)(n.b,(0,r.A)({ref:a,decorative:c,orientation:o,className:(0,d.cn)("shrink-0 bg-border","horizontal"===o?"h-[1px] w-full":"h-full w-[1px]",s)},m))}));c.displayName=n.b.displayName;const m=c},657:(e,a,s)=>{s.d(a,{cn:()=>o});var r=s(9765),t=s(6049);function o(){for(var e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return(0,t.QP)((0,r.$)(a))}},8727:(e,a,s)=>{s.r(a),s.d(a,{default:()=>N});var r=s(2555),t=s(2483),o=s(4198),n=s(5745),d=s(3233),i=s(3869),l=s(4304),c=s(9777),m=s(2196),u=s(526),f=s(7848),h=s(9154),p=s(3986),x=s(657),g=s(6723);const w=["className"],b=t.forwardRef(((e,a)=>{let{className:s}=e,t=(0,p.A)(e,w);return(0,g.jsx)("textarea",(0,r.A)({className:(0,x.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50","dark:border-dark-border dark:bg-dark-surface dark:text-dark-text-primary dark:placeholder:text-dark-text-secondary dark:focus-visible:ring-primary-400",s),ref:a},t))}));b.displayName="Textarea";const v=b;var y=s(1649);const N=(0,t.memo)((()=>{const{user:e,updateProfile:a,logout:s}=(0,o.A)(),{isDarkMode:p}=(0,c.D)(),[x,w]=((0,t.useRef)(null),(0,t.useState)({name:"",email:"",phone:"",address:"",birthdate:"",currentPassword:"",newPassword:"",confirmPassword:"",avatar:""})),[b,N]=(0,t.useState)({}),[j,A]=(0,t.useState)(0),[P,k]=(0,t.useState)(!1),[C,R]=(0,t.useState)(!1),[S,F]=(0,t.useState)(!1),[D,E]=(0,t.useState)(0),[I,z]=(0,t.useState)(!1),[B,O]=(0,t.useState)(!1),L=()=>{const e={};return x.name.trim()||(e.name="Name is required"),x.email||(e.email="Please enter an email"),x.email&&!/\S+@\S+\.\S+/.test(x.email)&&(e.email="Invalid email"),x.phone&&!/^[\d\s-+()]+$/.test(x.phone)&&(e.phone="Invalid phone"),C&&(x.currentPassword||(e.currentPassword="Current password is required"),x.newPassword?x.newPassword.length<8&&(e.newPassword="Password must be at least 8 characters"):e.newPassword="New password is required",x.newPassword!==x.confirmPassword&&(e.confirmPassword="Passwords do not match")),e};(0,t.useEffect)((()=>{(()=>{let e=0;x.name.trim()&&e++,x.email&&e++,x.phone&&e++,x.address&&e++,x.birthdate&&e++,E(Math.round(e/5*100))})()}),[x]),(0,t.useEffect)((()=>{e&&w((a=>(0,r.A)((0,r.A)({},a),{},{name:e.name||"",email:e.email||"",phone:e.phone||"",address:e.address||"",birthdate:e.birthdate||"",avatar:e.avatar||""})))}),[e]),(0,t.useEffect)((()=>{x.newPassword?A((e=>{let a=0;return e.length>=8&&a++,/[A-Z]/.test(e)&&a++,/[0-9]/.test(e)&&a++,/[^A-Za-z0-9]/.test(e)&&a++,a})(x.newPassword)):A(0)}),[x.newPassword]),(0,t.useEffect)((()=>{const e=(0,l.debounce)((()=>{localStorage.setItem("profileFormData",JSON.stringify({name:x.name,email:x.email,phone:x.phone,address:x.address,birthdate:x.birthdate}))}),500);return e(),()=>e.cancel()}),[x.name,x.email,x.phone,x.address,x.birthdate]),(0,t.useEffect)((()=>{const e=localStorage.getItem("profileFormData");e&&w((a=>(0,r.A)((0,r.A)({},a),JSON.parse(e))))}),[]);const Z=(0,t.useCallback)((e=>{const{name:a,value:s}=e.target;w((e=>(0,r.A)((0,r.A)({},e),{},{[a]:s}))),N((e=>(0,r.A)((0,r.A)({},e),{},{[a]:""})))}),[]);return e?(0,g.jsxs)("div",{className:"min-h-screen p-6 transition-colors duration-200 ".concat(p?"bg-dark-surface text-dark-text-primary":"bg-gray-50 text-gray-800"),children:[(0,g.jsx)(i.l$,{position:"top-right"}),(0,g.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-2xl mx-auto",children:[(0,g.jsxs)(m.Ay,{className:p?"bg-dark-surface-secondary border-dark-border":"",children:[(0,g.jsxs)(m.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,g.jsx)(m.ZB,{className:"text-2xl font-bold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Profile Settings"}),(0,g.jsx)(u.A,{onClick:()=>O(!B),variant:p?"secondary":"outline",className:"flex items-center gap-2",children:B?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.Bc_,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Save"})]}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(n.WXf,{className:"w-4 h-4"}),(0,g.jsx)("span",{children:"Edit"})]})})]}),(0,g.jsx)(y.A,{className:p?"bg-dark-border":""}),(0,g.jsx)(m.Wu,{className:"p-6",children:(0,g.jsx)("form",{onSubmit:async e=>{e.preventDefault();const s=L();if(Object.keys(s).length>0)return N(s),void Object.values(s).forEach((e=>i.oR.error(e)));F(!0);try{if("function"!==typeof a)return console.warn("updateProfile is not a function. Check AuthContext implementation."),void i.oR.error("Profile update is not available. Please try again later.");await a({name:x.name,email:x.email,phone:x.phone,address:x.address,birthdate:x.birthdate,avatar:x.avatar}),i.oR.success("Profile updated successfully!"),localStorage.removeItem("profileFormData"),O(!1)}catch(r){const e=r.message||"Failed to update profile. Please try again.";i.oR.error(e),console.error("Profile update error:",r)}finally{F(!1)}},className:"space-y-6",children:(0,g.jsxs)("div",{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"name",children:"Full Name"}),(0,g.jsx)(f.A,{type:"text",id:"name",name:"name",value:x.name,onChange:Z,disabled:!B,className:B?"":"cursor-not-allowed opacity-75"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"email",children:"Email Address"}),(0,g.jsx)(f.A,{type:"email",id:"email",name:"email",value:x.email,onChange:Z,disabled:!B,className:B?"":"cursor-not-allowed opacity-75"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"phone",children:"Phone Number"}),(0,g.jsx)(f.A,{type:"tel",id:"phone",name:"phone",value:x.phone,onChange:Z,disabled:!B,className:B?"":"cursor-not-allowed opacity-75"})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"address",children:"Address"}),(0,g.jsx)(v,{id:"address",name:"address",value:x.address,onChange:Z,disabled:!B,rows:3,className:B?"":"cursor-not-allowed opacity-75"})]}),B&&(0,g.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,g.jsx)(u.A,{type:"button",variant:"outline",onClick:()=>{window.confirm("Are you sure you want to reset all changes?")&&(w({name:(null===e||void 0===e?void 0:e.name)||"",email:(null===e||void 0===e?void 0:e.email)||"",phone:(null===e||void 0===e?void 0:e.phone)||"",address:(null===e||void 0===e?void 0:e.address)||"",birthdate:(null===e||void 0===e?void 0:e.birthdate)||"",avatar:(null===e||void 0===e?void 0:e.avatar)||"",currentPassword:"",newPassword:"",confirmPassword:""}),N({}),localStorage.removeItem("profileFormData"),i.oR.success("Form reset successfully."))},children:"Reset"}),(0,g.jsx)(u.A,{type:"submit",variant:"default",className:"bg-green-500 hover:bg-green-600",children:"Save Changes"})]})]})})}),(0,g.jsxs)(m.wL,{className:"flex justify-between",children:[(0,g.jsx)(u.A,{variant:"destructive",onClick:()=>{window.confirm("Are you sure you want to log out?")&&(s(),i.oR.success("Logged out successfully."))},children:"Logout"}),C?(0,g.jsx)(u.A,{variant:"outline",onClick:()=>R(!1),children:"Cancel Password Change"}):(0,g.jsx)(u.A,{variant:"outline",onClick:()=>R(!0),children:"Change Password"})]})]}),C&&(0,g.jsxs)(m.Ay,{className:"mt-6 ".concat(p?"bg-dark-surface-secondary border-dark-border":""),children:[(0,g.jsx)(m.aR,{children:(0,g.jsx)(m.ZB,{className:p?"text-dark-text-primary":"",children:"Change Password"})}),(0,g.jsxs)(m.Wu,{className:"space-y-4",children:[(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"currentPassword",children:"Current Password"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)(f.A,{type:P?"text":"password",id:"currentPassword",name:"currentPassword",value:x.currentPassword,onChange:Z}),(0,g.jsx)(u.A,{type:"button",variant:"ghost",size:"icon",className:"absolute right-2 top-1/2 -translate-y-1/2",onClick:()=>k(!P),children:P?(0,g.jsx)(n._NO,{}):(0,g.jsx)(n.Vap,{})})]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"newPassword",children:"New Password"}),(0,g.jsxs)("div",{className:"relative",children:[(0,g.jsx)(f.A,{type:P?"text":"password",id:"newPassword",name:"newPassword",value:x.newPassword,onChange:Z}),(0,g.jsx)("div",{className:"mt-2 flex gap-1",children:[...Array(4)].map(((e,a)=>(0,g.jsx)("div",{className:"h-1 flex-1 rounded-full ".concat(a<j?"bg-green-500":p?"bg-dark-border":"bg-gray-200")},a)))})]})]}),(0,g.jsxs)("div",{className:"space-y-2",children:[(0,g.jsx)(h.A,{htmlFor:"confirmPassword",children:"Confirm Password"}),(0,g.jsx)(f.A,{type:P?"text":"password",id:"confirmPassword",name:"confirmPassword",value:x.confirmPassword,onChange:Z})]})]}),(0,g.jsxs)(m.wL,{className:"flex justify-end gap-4",children:[(0,g.jsx)(u.A,{type:"button",variant:"outline",onClick:()=>R(!1),children:"Cancel"}),(0,g.jsx)(u.A,{type:"button",variant:"default",className:"bg-green-500 hover:bg-green-600",onClick:async e=>{e.preventDefault();const s=L();if(s.currentPassword||s.newPassword||s.confirmPassword)return N(s),void Object.values(s).forEach((e=>i.oR.error(e)));if(window.confirm("Are you sure you want to change your password?")){F(!0);try{if("function"!==typeof a)return console.warn("updateProfile is not a function. Check AuthContext implementation."),void i.oR.error("Password change is not available. Please try again later.");await a({currentPassword:x.currentPassword,newPassword:x.newPassword}),i.oR.success("Password changed successfully!"),w((e=>(0,r.A)((0,r.A)({},e),{},{currentPassword:"",newPassword:"",confirmPassword:""}))),R(!1)}catch(t){const e=t.message||"Failed to change password. Please try again.";i.oR.error(e),console.error("Password change error:",t)}finally{F(!1)}}},disabled:S,children:S?"Updating...":"Update Password"})]})]})]})]}):(0,g.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-white dark:bg-dark-surface",children:(0,g.jsx)(d.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-4 border-t-green-500 border-gray-200 rounded-full"})})}))}}]);
//# sourceMappingURL=727.f7dff089.chunk.js.map