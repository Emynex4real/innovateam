"use strict";(self.webpackChunkinnovateam=self.webpackChunkinnovateam||[]).push([[722],{2722:(e,r,a)=>{a.r(r),a.d(r,{default:()=>m});var t=a(9379),o=a(2483),s=a(3376),l=a(3233),n=a(3869),i=a(4686),d=a(9777),c=a(6723);const u=(e,r)=>{switch(r.type){case"UPDATE_FIELD":return(0,t.A)((0,t.A)({},e),{},{[r.field]:r.value});case"UPDATE_COURSE":const a=[...e.courses];return a[r.index]=(0,t.A)((0,t.A)({},a[r.index]),{},{[r.key]:r.value}),(0,t.A)((0,t.A)({},e),{},{courses:a});case"SET_FILE":return(0,t.A)((0,t.A)({},e),{},{[r.field]:r.file});case"RESET_FORM":return r.initialFormState;default:return e}},m=()=>{const{state:e}=(0,s.zy)(),{id:r,type:a,quantity:t,amount:m,fullname:g}=e||{},x=(0,s.Zp)(),{isDarkMode:p}=(0,d.D)(),b={fullname:g||"",jambRegNo:"",profileCode:"",registrationNumber:"",courses:Array.from({length:9},()=>({subject:"",grade:"",regNo:"",examNo:"",year:"",examType:""})),oLevelFile:null,secondSittingFile:null,additionalInfo:""},[f,y]=(0,o.useReducer)(u,b),[h,v]=(0,o.useState)(!1),[j,k]=(0,o.useState)(0),N=["Agricultural Science","Animal Husbandry","Arabic","Auto Mechanics","Basic Electricity","Basic Electronics","Biology","Bookkeeping","Building Construction","Chemistry","Christian Religious Studies","Civic Education","Clothing and Textiles","Commerce","Computer Studies","Data Processing","Economics","English Language","Financial Accounting","Fisheries","Food and Nutrition","French","Further Mathematics","Garment Making","General Mathematics","Geography","Government","Hausa","Health Education","History","Home Management","Igbo","Insurance","Islamic Religious Studies","Literature-in-English","Marketing","Metal Work","Music","Office Practice","Physical Education","Physics","Store Management","Technical Drawing","Visual Art","Woodwork","Yoruba"].sort();(0,o.useEffect)(()=>{(()=>{let e=0;const r=5*f.courses.length+2;f.fullname.trim()&&e++,f.oLevelFile&&e++,f.courses.forEach(r=>{r.subject&&e++,r.grade&&e++,r.regNo&&e++,r.examNo&&e++,r.year&&e++,r.examType&&e++}),k(Math.round(e/r*100))})()},[f]);const E=e=>e>=1980&&e<=(new Date).getFullYear(),C=e=>/^[A-Z0-9]{8,12}$/.test(e);(0,o.useEffect)(()=>{const e=setTimeout(()=>{localStorage.setItem("oLevelFormData",JSON.stringify(f))},1e3);return()=>clearTimeout(e)},[f]),(0,o.useEffect)(()=>{const r=localStorage.getItem("oLevelFormData");if(r){const e=JSON.parse(r);Object.entries(e).forEach(e=>{let[r,a]=e;"courses"!==r?y({type:"UPDATE_FIELD",field:r,value:a}):a.forEach((e,r)=>{r<f.courses.length&&Object.entries(e).forEach(e=>{let[a,t]=e;y({type:"UPDATE_COURSE",index:r,key:a,value:t})})})})}e||(n.oR.error("Invalid navigation. Redirecting..."),setTimeout(()=>x("/forms"),1500))},[e,x,f.courses.length]);const F=(0,o.useCallback)((e,r)=>{y({type:"UPDATE_FIELD",field:e,value:r})},[]),w=(0,o.useCallback)((e,r,a)=>{y({type:"UPDATE_COURSE",index:e,key:r,value:a})},[]);return(0,c.jsxs)("div",{className:"min-h-screen py-12 font-sans transition-colors duration-200 ".concat(p?"bg-dark-surface text-dark-text-primary":"bg-gradient-to-b from-gray-100 to-green-50"),children:[(0,c.jsx)(n.l$,{position:"top-right"}),(0,c.jsxs)("div",{className:"container mx-auto px-4 sm:px-6 lg:max-w-6xl",children:[(0,c.jsxs)("div",{className:"mb-8",children:[(0,c.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,c.jsx)("h2",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Form Progress"}),(0,c.jsxs)("span",{className:"text-sm font-medium ".concat(p?"text-dark-text-secondary":"text-gray-600"),children:[j,"% Complete"]})]}),(0,c.jsx)("div",{className:"h-2 rounded-full ".concat(p?"bg-dark-border":"bg-gray-200"),children:(0,c.jsx)(l.P.div,{initial:{width:0},animate:{width:"".concat(j,"%")},className:"h-full rounded-full ".concat(p?"bg-green-600":"bg-green-500")})})]}),(0,c.jsxs)("div",{className:"".concat(p?"bg-dark-surface-secondary border-dark-border":"bg-white border-gray-100"," rounded-2xl shadow-xl p-6 md:p-8 border"),children:[(0,c.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,c.jsx)("h1",{className:"text-2xl md:text-3xl font-bold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"O-Level Entry Form"}),(0,c.jsxs)("div",{className:"flex gap-4",children:[(0,c.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to clear the form?")&&(y({type:"RESET_FORM",initialFormState:b}),localStorage.removeItem("oLevelFormData"),n.oR.success("Form cleared successfully."))},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ".concat(p?"bg-dark-surface hover:bg-dark-border text-dark-text-primary":"bg-gray-100 hover:bg-gray-200 text-gray-700"),children:"Clear Form"}),(0,c.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to cancel? Unsaved changes will be lost.")&&(localStorage.removeItem("oLevelFormData"),x("/forms"))},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ".concat(p?"bg-red-900/30 text-red-400 hover:bg-red-900/40":"bg-red-50 text-red-600 hover:bg-red-100"),children:"Cancel"})]})]}),(0,c.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v(!0),console.log("Form data before validation:",f),!f.jambRegNo.trim())return n.oR.error("Please enter your JAMB registration number."),void v(!1);if(r=f.jambRegNo,!/^[0-9]{12}[A-Z]{2}$/.test(r))return n.oR.error("Invalid JAMB registration number format. It should be 12 digits followed by 2 letters (e.g., 123456789012AB)."),void v(!1);var r,a;if(f.profileCode.trim()&&(a=f.profileCode,!/^[A-Z0-9]{8,12}$/.test(a)))return n.oR.error("Invalid profile code format."),void v(!1);const{isValid:t,errors:o}=(e=>{console.log("Validating courses:",e);const r=e.filter(e=>{const r=e.subject&&e.grade&&e.examNo&&e.year&&e.examType;return r||console.log("Unfilled course:",e),r});console.log("Filled courses count:",r.length);const a=new Set(r.map(e=>e.subject)),t={isValid:9===r.length&&a.size===r.length&&r.every(e=>E(e.year))&&r.every(e=>C(e.examNo)),errors:[9!==r.length?"All 9 subjects must be fully completed.":"",a.size!==r.length?"Duplicate subjects detected.":"",r.some(e=>!E(e.year))?"Invalid year in subjects.":"",r.some(e=>!C(e.examNo))?"Invalid examination number format.":""].filter(Boolean)};return console.log("Validation result:",t),t})(f.courses);if(!f.fullname.trim())return n.oR.error("Please enter a full name."),void v(!1);if(!f.oLevelFile)return n.oR.error("Please upload an O-Level result file."),void v(!1);if(!t)return console.log("Validation errors:",o),o.forEach(e=>n.oR.error(e)),void v(!1);try{const e=new FormData;e.append("fullname",f.fullname),e.append("jambRegNo",f.jambRegNo),e.append("profileCode",f.profileCode),e.append("courses",JSON.stringify(f.courses)),e.append("oLevelFile",f.oLevelFile),console.log("Sending form data:",{fullname:f.fullname,jambRegNo:f.jambRegNo,profileCode:f.profileCode,courses:f.courses,file:f.oLevelFile});const r=await i.A.post("http://localhost:5000/api/olevel/upload",e,{headers:{"Content-Type":"multipart/form-data"}});if(r.data.success){n.oR.success("O-Level entry submitted successfully!");const e="entry_".concat(Date.now());x("/dashboard/buy-olevel-upload",{state:{status:"processing",entryId:e,profileCode:r.data.profileCode||f.profileCode,jambRegNo:f.jambRegNo,fullname:f.fullname,type:"UTME",quantity:1,amount:"\u20a6400"}})}}catch(d){var s,l;console.error("Error submitting form:",d),n.oR.error((null===(s=d.response)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.message)||"Error submitting form. Please try again.")}finally{v(!1)}},className:"space-y-8",children:[(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Personal Information"}),(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Full Name"}),(0,c.jsx)("input",{type:"text",value:f.fullname,onChange:e=>F("fullname",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary placeholder-dark-text-secondary":"border-gray-200 placeholder-gray-400"),placeholder:"Enter your full name"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"JAMB Registration Number"}),(0,c.jsx)("input",{type:"text",value:f.jambRegNo,onChange:e=>F("jambRegNo",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary placeholder-dark-text-secondary":"border-gray-200 placeholder-gray-400"),placeholder:"Enter JAMB registration number"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Profile Code (Optional)"}),(0,c.jsx)("input",{type:"text",value:f.profileCode,onChange:e=>F("profileCode",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary placeholder-dark-text-secondary":"border-gray-200 placeholder-gray-400"),placeholder:"Enter profile code (optional)"})]})]})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"O-Level Results"}),(0,c.jsx)("div",{className:"grid grid-cols-1 gap-6",children:f.courses.map((e,r)=>(0,c.jsx)("div",{className:"p-4 rounded-xl border ".concat(p?"border-dark-border bg-dark-surface":"border-gray-200 bg-gray-50"),children:(0,c.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,c.jsxs)("div",{className:"md:col-span-2",children:[(0,c.jsxs)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:["Subject ",r+1]}),(0,c.jsxs)("select",{value:e.subject,onChange:e=>w(r,"subject",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),children:[(0,c.jsx)("option",{value:"",children:"Select Subject"}),N.map(e=>(0,c.jsx)("option",{value:e,className:p?"bg-dark-surface text-dark-text-primary":"",children:e},e))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Grade"}),(0,c.jsxs)("select",{value:e.grade,onChange:e=>w(r,"grade",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),children:[(0,c.jsx)("option",{value:"",children:"Grade"}),["A1","B2","B3","C4","C5","C6","D7","E8","F9"].map(e=>(0,c.jsx)("option",{value:e,className:p?"bg-dark-surface text-dark-text-primary":"",children:e},e))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Exam Number"}),(0,c.jsx)("input",{type:"text",value:e.examNo,onChange:e=>w(r,"examNo",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),placeholder:"Enter exam number"})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Exam Type"}),(0,c.jsxs)("select",{value:e.examType,onChange:e=>w(r,"examType",e.target.value),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),children:[(0,c.jsx)("option",{value:"",children:"Select"}),["WAEC","NECO","NABTEB"].map(e=>(0,c.jsx)("option",{value:e,className:p?"bg-dark-surface text-dark-text-primary":"",children:e},e))]})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Year"}),(0,c.jsx)("input",{type:"number",value:e.year,onChange:e=>w(r,"year",e.target.value),min:"1980",max:(new Date).getFullYear(),className:"w-full px-4 py-3 rounded-xl border focus:ring-2 focus:ring-green-500 focus:border-transparent transition-all duration-200 ".concat(p?"bg-dark-surface border-dark-border text-dark-text-primary":"border-gray-200"),placeholder:"YYYY"})]})]})},r))})]}),(0,c.jsxs)("div",{className:"space-y-4",children:[(0,c.jsx)("h3",{className:"text-lg font-semibold ".concat(p?"text-dark-text-primary":"text-gray-800"),children:"Document Upload"}),(0,c.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,c.jsxs)("div",{children:[(0,c.jsx)("label",{className:"block text-sm font-medium mb-2 ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"O-Level Result (Required)"}),(0,c.jsxs)("div",{className:"p-4 border-2 border-dashed rounded-xl text-center ".concat(p?"border-dark-border hover:border-green-600":"border-gray-300 hover:border-green-500"),children:[(0,c.jsx)("input",{type:"file",onChange:e=>((e,r)=>{if(r){const a=5242880;if(!["application/pdf","image/jpeg","image/png"].includes(r.type))return void n.oR.error("Please upload a PDF, JPEG, or PNG file.");if(r.size>a)return void n.oR.error("File size must be less than 5MB.");y({type:"SET_FILE",field:e,file:r}),n.oR.success("".concat("oLevelFile"===e?"O-Level":"Second sitting"," file uploaded."))}})("oLevelFile",e.target.files[0]),accept:".pdf,.jpg,.jpeg,.png",className:"hidden",id:"oLevelFile"}),(0,c.jsx)("label",{htmlFor:"oLevelFile",className:"cursor-pointer",children:(0,c.jsx)("div",{className:"text-sm ".concat(p?"text-dark-text-secondary":"text-gray-500"),children:f.oLevelFile?(0,c.jsx)("span",{className:"text-green-500",children:f.oLevelFile.name}):(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("span",{className:"font-medium ".concat(p?"text-dark-text-primary":"text-gray-700"),children:"Click to upload"})," or drag and drop"]})})})]})]})})]}),(0,c.jsx)("div",{className:"flex justify-end gap-4",children:(0,c.jsx)("button",{type:"submit",disabled:h,className:"px-6 py-3 rounded-xl font-semibold transition-all duration-300 ".concat(p?"bg-green-600 hover:bg-green-700 text-white":"bg-green-500 hover:bg-green-600 text-white"," disabled:opacity-50 disabled:cursor-not-allowed"),children:h?(0,c.jsxs)("div",{className:"flex items-center gap-2",children:[(0,c.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Submitting..."]}):"Submit Entry"})})]})]})]})]})}}}]);
//# sourceMappingURL=722.e42ff67a.chunk.js.map